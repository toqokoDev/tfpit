import{c as W,a as j,e as B,f as L,F as $}from"./C5YCDKKw.js";import{e as T,M as O,Q as q,g as A,o as V,c as D,n as U,h as z,O as J,f as I,w as E,b as M,q as Z,d as H,t as Q,m as G}from"./DZ62IjT-.js";const K=T({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,n=W(t,"modelValue",e,{passive:!0,defaultValue:t.defaultValue});return(r,l)=>O((V(),D("input",{"onUpdate:modelValue":l[0]||(l[0]=u=>J(n)?n.value=u:null),"data-slot":"input",class:U(A(z)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t.class))},null,2)),[[q,A(n)]])}}),X=Object.assign(K,{__name:"UiInput"});var Y=Object.defineProperty,ee=(a,e,t)=>e in a?Y(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,y=(a,e,t)=>ee(a,typeof e!="symbol"?e+"":e,t);const N={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}},S=(a,e,t)=>a.replaceAll(e,"").replace(t,".").replace("..",".").replace(/[^.\d]/g,""),C=(a,e,t)=>{var s;return new Intl.NumberFormat(((s=t.number)==null?void 0:s.locale)??"en",{minimumFractionDigits:a,maximumFractionDigits:e,roundingMode:"trunc"})},te=(a,e=!0,t)=>{var s,n,r,l;const u=((s=t.number)==null?void 0:s.unsigned)!==!0&&a.startsWith("-")?"-":"",c=((n=t.number)==null?void 0:n.fraction)??0;let o=C(0,c,t);const p=o.formatToParts(1000.12),h=((r=p.find(i=>i.type==="group"))==null?void 0:r.value)??" ",k=((l=p.find(i=>i.type==="decimal"))==null?void 0:l.value)??".",m=S(a,h,k);if(Number.isNaN(parseFloat(m)))return u;const v=m.split(".");if(v[1]!=null&&v[1].length>=1){const i=v[1].length<=c?v[1].length:c;o=C(i,c,t)}let f=o.format(parseFloat(m));return e?c>0&&m.endsWith(".")&&!m.slice(0,-1).includes(".")&&(f+=k):f=S(f,h,k),u+f},F=a=>JSON.parse(a.replaceAll("'",'"')),se=(a,e={})=>{const t={...e};a.dataset.maska!=null&&a.dataset.maska!==""&&(t.mask=ae(a.dataset.maska)),a.dataset.maskaEager!=null&&(t.eager=x(a.dataset.maskaEager)),a.dataset.maskaReversed!=null&&(t.reversed=x(a.dataset.maskaReversed)),a.dataset.maskaTokensReplace!=null&&(t.tokensReplace=x(a.dataset.maskaTokensReplace)),a.dataset.maskaTokens!=null&&(t.tokens=ne(a.dataset.maskaTokens));const s={};return a.dataset.maskaNumberLocale!=null&&(s.locale=a.dataset.maskaNumberLocale),a.dataset.maskaNumberFraction!=null&&(s.fraction=parseInt(a.dataset.maskaNumberFraction)),a.dataset.maskaNumberUnsigned!=null&&(s.unsigned=x(a.dataset.maskaNumberUnsigned)),(a.dataset.maskaNumber!=null||Object.values(s).length>0)&&(t.number=s),t},x=a=>a!==""?!!JSON.parse(a):!0,ae=a=>a.startsWith("[")&&a.endsWith("]")?F(a):a,ne=a=>{if(a.startsWith("{")&&a.endsWith("}"))return F(a);const e={};return a.split("|").forEach(t=>{const s=t.split(":");e[s[0]]={pattern:P()?new RegExp(s[1],"u"):new RegExp(s[1]),optional:s[2]==="optional",multiple:s[2]==="multiple",repeated:s[2]==="repeated"}}),e},P=()=>{try{return new RegExp("\\p{L}","u"),!0}catch{return!1}};class re{constructor(e={}){y(this,"opts",{}),y(this,"memo",new Map);const t={...e};if(t.tokens!=null){t.tokens=t.tokensReplace?{...t.tokens}:{...N,...t.tokens};for(const s of Object.values(t.tokens))typeof s.pattern=="string"&&(s.pattern=P()?new RegExp(s.pattern,"u"):new RegExp(s.pattern))}else t.tokens=N;Array.isArray(t.mask)&&(t.mask.length>1?t.mask=[...t.mask].sort((s,n)=>s.length-n.length):t.mask=t.mask[0]??""),t.mask===""&&(t.mask=null),this.opts=t}masked(e){return this.process(String(e),this.findMask(String(e)))}unmasked(e){return this.process(String(e),this.findMask(String(e)),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(e){const t=this.findMask(String(e));if(this.opts.mask==null||t==null)return!1;const s=this.process(String(e),t).length;return typeof this.opts.mask=="string"?s>=this.opts.mask.length:s>=t.length}findMask(e){const t=this.opts.mask;if(t==null)return null;if(typeof t=="string")return t;if(typeof t=="function")return t(e);const s=this.process(e,t.slice(-1).pop()??"",!1);return t.find(n=>this.process(e,n,!1).length>=s.length)??""}escapeMask(e){const t=[],s=[];return e.split("").forEach((n,r)=>{n==="!"&&e[r-1]!=="!"?s.push(r-s.length):t.push(n)}),{mask:t.join(""),escaped:s}}process(e,t,s=!0){if(this.opts.number!=null)return te(e,s,this.opts);if(t==null)return e;const n=`v=${e},mr=${t},m=${s?1:0}`;if(this.memo.has(n))return this.memo.get(n);const{mask:r,escaped:l}=this.escapeMask(t),u=[],c=this.opts.tokens!=null?this.opts.tokens:{},o=this.isReversed()?-1:1,p=this.isReversed()?"unshift":"push",h=this.isReversed()?0:r.length-1,k=this.isReversed()?()=>i>-1&&d>-1:()=>i<r.length&&d<e.length,m=b=>!this.isReversed()&&b<=h||this.isReversed()&&b>=h;let v,f=-1,i=this.isReversed()?r.length-1:0,d=this.isReversed()?e.length-1:0,w=!1;for(;k();){const b=r.charAt(i),g=c[b],_=g?.transform!=null?g.transform(e.charAt(d)):e.charAt(d);if(!l.includes(i)&&g!=null?(_.match(g.pattern)!=null?(u[p](_),g.repeated?(f===-1?f=i:i===h&&i!==f&&(i=f-o),h===f&&(i-=o)):g.multiple&&(w=!0,i-=o),i+=o):g.multiple?w&&(i+=o,d-=o,w=!1):_===v?v=void 0:g.optional&&(i+=o,d-=o),d+=o):(s&&!this.isEager()&&u[p](b),_===b&&!this.isEager()?d+=o:v=b,this.isEager()||(i+=o)),this.isEager())for(;m(i)&&(c[r.charAt(i)]==null||l.includes(i));){if(s){if(u[p](r.charAt(i)),e.charAt(d)===r.charAt(i)){i+=o,d+=o;continue}}else r.charAt(i)===e.charAt(d)&&(d+=o);i+=o}}return this.memo.set(n,u.join("")),this.memo.get(n)}}class ie{constructor(e,t={}){y(this,"items",new Map),y(this,"eventAbortController"),y(this,"onInput",s=>{if(s instanceof CustomEvent&&s.type==="input"&&!s.isTrusted&&!s.bubbles)return;const n=s.target,r=this.items.get(n);if(r===void 0)return;const l="inputType"in s&&s.inputType.startsWith("delete"),u=r.isEager(),c=l&&u&&r.unmasked(n.value)===""?"":n.value;this.fixCursor(n,l,()=>this.setValue(n,c))}),this.options=t,this.eventAbortController=new AbortController,this.init(this.getInputs(e))}update(e={}){this.options={...e},this.init(Array.from(this.items.keys()))}updateValue(e){var t;e.value!==""&&e.value!==((t=this.processInput(e))==null?void 0:t.masked)&&this.setValue(e,e.value)}destroy(){this.eventAbortController.abort(),this.items.clear()}init(e){const t=this.getOptions(this.options);for(const s of e){if(!this.items.has(s)){const{signal:r}=this.eventAbortController;s.addEventListener("input",this.onInput,{capture:!0,signal:r})}const n=new re(se(s,t));this.items.set(s,n),queueMicrotask(()=>this.updateValue(s)),s.selectionStart===null&&n.isEager()&&console.warn("Maska: input of `%s` type is not supported",s.type)}}getInputs(e){return typeof e=="string"?Array.from(document.querySelectorAll(e)):"length"in e?Array.from(e):[e]}getOptions(e){const{onMaska:t,preProcess:s,postProcess:n,...r}=e;return r}fixCursor(e,t,s){var n,r;const l=e.selectionStart,u=e.value;if(s(),l===null||l===u.length&&!t)return;const c=e.value,o=u.slice(0,l),p=c.slice(0,l),h=(n=this.processInput(e,o))==null?void 0:n.unmasked,k=(r=this.processInput(e,p))==null?void 0:r.unmasked;if(h===void 0||k===void 0)return;let m=l;o!==p&&(m+=t?c.length-u.length:h.length-k.length),e.setSelectionRange(m,m)}setValue(e,t){const s=this.processInput(e,t);s!==void 0&&(e.value=s.masked,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(n=>n(s)):this.options.onMaska(s)),e.dispatchEvent(new CustomEvent("maska",{detail:s})),e.dispatchEvent(new CustomEvent("input",{detail:s.masked})))}processInput(e,t){const s=this.items.get(e);if(s===void 0)return;let n=t??e.value;this.options.preProcess!=null&&(n=this.options.preProcess(n));let r=s.masked(n);return this.options.postProcess!=null&&(r=this.options.postProcess(r)),{masked:r,unmasked:s.unmasked(n),completed:s.completed(n)}}}const R=new WeakMap,oe=(a,e)=>{if(a.arg==null||a.instance==null)return;const t="setup"in a.instance.$.type;a.arg in a.instance?a.instance[a.arg]=e:t&&console.warn("Maska: please expose `%s` using defineExpose",a.arg)},le=(a,e)=>{var t;const s=a instanceof HTMLInputElement?a:a.querySelector("input");if(s==null||s?.type==="file")return;let n={};if(e.value!=null&&(n=typeof e.value=="string"?{mask:e.value}:{...e.value}),e.arg!=null){const r=l=>{const u=e.modifiers.unmasked?l.unmasked:e.modifiers.completed?l.completed:l.masked;oe(e,u)};n.onMaska=n.onMaska==null?r:Array.isArray(n.onMaska)?[...n.onMaska,r]:[n.onMaska,r]}R.has(s)?(t=R.get(s))==null||t.update(n):R.set(s,new ie(s,n))},ue=T({__name:"Input",props:{name:{},type:{},label:{},placeholder:{},autocomplete:{default:"off"},errorsToShow:{default:"first"},mask:{default:""},disabled:{type:Boolean,default:!1}},setup(a){const e=a;function t(s){return s.length?e.errorsToShow==="first"?[s[0]||""]:s:[]}return(s,n)=>{const r=B,l=X,u=L,c=j;return V(),I(A($),{name:a.name},{default:E(({field:o,errors:p})=>[M(c,{"data-invalid":!!p.length},{default:E(()=>[M(r,{for:a.name},{default:E(()=>[H(Q(a.label),1)]),_:1},8,["for"]),O(M(l,G({id:a.name,type:a.type,disabled:a.disabled,placeholder:a.placeholder,autocomplete:a.autocomplete,"aria-invalid":!!p.length},o),null,16,["id","type","disabled","placeholder","autocomplete","aria-invalid"]),[[A(le),a.mask]]),p.length?(V(),I(u,{key:0,errors:t(p)},null,8,["errors"])):Z("",!0)]),_:2},1032,["data-invalid"])]),_:1},8,["name"])}}}),de=Object.assign(ue,{__name:"BaseInput"});export{de as _};
