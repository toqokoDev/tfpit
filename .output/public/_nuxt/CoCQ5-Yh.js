import{c as x,n as O,a as V,d as K}from"./qjfj-mJN.js";import{P as T}from"./Cm8hpxjP.js";import{a as q,i as N,u as H}from"./CnvqL-Ka.js";import{e as A,k as h,f as b,o as w,w as y,r as C,g as n,U as P,q as Y,A as J,z as W,J as X,C as U,y as Q,M as Z,ai as ee,b as te,m as M,h as B,n as ae}from"./DZ62IjT-.js";import{r as re}from"./CMpkczBb.js";const oe=["INPUT","TEXTAREA"];function Re(e,t,r,a={}){if(!t||a.enableIgnoredElement&&oe.includes(t.nodeName))return null;const{arrowKeyOptions:o="both",attributeName:l="[data-reka-collection-item]",itemsArray:d=[],loop:i=!0,dir:c="ltr",preventScroll:s=!0,focus:f=!1}=a,[p,F,S,I,E,R]=[e.key==="ArrowRight",e.key==="ArrowLeft",e.key==="ArrowUp",e.key==="ArrowDown",e.key==="Home",e.key==="End"],u=S||I,v=p||F;if(!E&&!R&&(!u&&!v||o==="vertical"&&v||o==="horizontal"&&u))return null;const g=r?Array.from(r.querySelectorAll(l)):d;if(!g.length)return null;s&&e.preventDefault();let _=null;return v||u?_=D(g,t,{goForward:u?I:c==="ltr"?p:F,loop:i}):E?_=g.at(0)||null:R&&(_=g.at(-1)||null),f&&_?.focus(),_}function D(e,t,r,a=e.length){if(--a===0)return null;const o=e.indexOf(t),l=r.goForward?o+1:o-1;if(!r.loop&&(l<0||l>=e.length))return null;const d=(l+e.length)%e.length,i=e[d];return i?i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false"?D(e,i,r,a):i:null}const[$,se]=x("AvatarRoot");var ne=A({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){return q(),se({imageLoadingStatus:h("idle")}),(t,r)=>(w(),b(n(T),{"as-child":t.asChild,as:t.as},{default:y(()=>[C(t.$slots,"default")]),_:3},8,["as-child","as"]))}}),le=ne,ue=A({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){const t=e,r=$();q();const a=h(t.delayMs===void 0);return P(o=>{if(t.delayMs&&N){const l=window.setTimeout(()=>{a.value=!0},t.delayMs);o(()=>{window.clearTimeout(l)})}}),(o,l)=>a.value&&n(r).imageLoadingStatus.value!=="loaded"?(w(),b(n(T),{key:0,"as-child":o.asChild,as:o.as},{default:y(()=>[C(o.$slots,"default")]),_:3},8,["as-child","as"])):Y("v-if",!0)}}),ie=ue;function L(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function de(e,{referrerPolicy:t,crossOrigin:r}={}){const a=h(!1),o=h(null),l=J(()=>a.value?(!o.value&&N&&(o.value=new window.Image),o.value):null),d=h(L(l.value,e.value)),i=c=>()=>{a.value&&(d.value=c)};return W(()=>{a.value=!0,P(c=>{const s=l.value;if(!s)return;d.value=L(s,e.value);const f=i("loaded"),p=i("error");s.addEventListener("load",f),s.addEventListener("error",p),t?.value&&(s.referrerPolicy=t.value),typeof r?.value=="string"&&(s.crossOrigin=r.value),c(()=>{s.removeEventListener("load",f),s.removeEventListener("error",p)})})}),X(()=>{a.value=!1}),d}var ce=A({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(e,{emit:t}){const r=e,a=t,{src:o,referrerPolicy:l,crossOrigin:d}=U(r);q();const i=$(),c=de(o,{referrerPolicy:l,crossOrigin:d});return Q(c,s=>{a("loadingStatusChange",s),s!=="idle"&&(i.imageLoadingStatus.value=s)},{immediate:!0}),(s,f)=>Z((w(),b(n(T),{role:"img","as-child":s.asChild,as:s.as,src:n(o),"referrer-policy":n(l)},{default:y(()=>[C(s.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[ee,n(c)==="loaded"]])}}),fe=ce;const pe="rovingFocusGroup.onEntryFocus",ve={bubbles:!1,cancelable:!0},ge={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Te(e,t,r){const a=_e(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return ge[a]}function me(e,t=!1){const r=O();for(const a of e)if(a===r||(a.focus({preventScroll:t}),O()!==r))return}function qe(e,t){return e.map((r,a)=>e[(t+a)%e.length])}const[ke,he]=x("RovingFocusGroup");var ye=A({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:t,emit:r}){const a=e,o=r,{loop:l,orientation:d,dir:i}=U(a),c=V(i),s=H(a,"currentTabStopId",o,{defaultValue:a.defaultCurrentTabStopId,passive:a.currentTabStopId===void 0}),f=h(!1),p=h(!1),F=h(0),{getItems:S,CollectionSlot:I}=K({isProvider:!0});function E(u){const v=!p.value;if(u.currentTarget&&u.target===u.currentTarget&&v&&!f.value){const g=new CustomEvent(pe,ve);if(u.currentTarget.dispatchEvent(g),o("entryFocus",g),!g.defaultPrevented){const _=S().map(m=>m.ref).filter(m=>m.dataset.disabled!==""),k=_.find(m=>m.getAttribute("data-active")===""),z=_.find(m=>m.getAttribute("data-highlighted")===""),j=_.find(m=>m.id===s.value),G=[k,z,j,..._].filter(Boolean);me(G,a.preventScrollOnEntryFocus)}}p.value=!1}function R(){setTimeout(()=>{p.value=!1},1)}return t({getItems:S}),he({loop:l,dir:c,orientation:d,currentTabStopId:s,onItemFocus:u=>{s.value=u},onItemShiftTab:()=>{f.value=!0},onFocusableItemAdd:()=>{F.value++},onFocusableItemRemove:()=>{F.value--}}),(u,v)=>(w(),b(n(I),null,{default:y(()=>[te(n(T),{tabindex:f.value||F.value===0?-1:0,"data-orientation":n(d),as:u.as,"as-child":u.asChild,dir:n(c),style:{outline:"none"},onMousedown:v[0]||(v[0]=g=>p.value=!0),onMouseup:R,onFocus:E,onBlur:v[1]||(v[1]=g=>f.value=!1)},{default:y(()=>[C(u.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Oe=ye;const Ae=A({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(e){const t=e;return(r,a)=>(w(),b(n(fe),M({"data-slot":"avatar-image"},t,{class:"aspect-square size-full"}),{default:y(()=>[C(r.$slots,"default")]),_:3},16))}}),Le=Object.assign(Ae,{__name:"UiAvatarImage"}),be=A({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,r=re(t,"class");return(a,o)=>(w(),b(n(ie),M({"data-slot":"avatar-fallback"},n(r),{class:n(B)("bg-muted flex size-full items-center justify-center rounded-full",t.class)}),{default:y(()=>[C(a.$slots,"default")]),_:3},16,["class"]))}}),xe=Object.assign(be,{__name:"UiAvatarFallback"}),we=A({__name:"Avatar",props:{class:{}},setup(e){const t=e;return(r,a)=>(w(),b(n(le),{"data-slot":"avatar",class:ae(n(B)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t.class))},{default:y(()=>[C(r.$slots,"default")]),_:3},8,["class"]))}}),Ne=Object.assign(we,{__name:"UiAvatar"});export{Oe as R,Le as _,xe as a,Ne as b,me as f,Te as g,ke as i,Re as u,qe as w};
