import{_ as k}from"./Nyoiwj8l.js";import{_ as C,C as S,a as V}from"./DAqg_iOj.js";import{_ as B}from"./CjtgTk1I.js";import{u as N,_ as E,t as T,a as j,b as P}from"./C5YCDKKw.js";import{u as q}from"./DWzOavYo.js";import{e as A,k as m,u as D,l as F,c as H,a as t,b as o,g as s,w as a,p as I,o as _,f as K,q as L,t as M,d as u}from"./DZ62IjT-.js";import{l as W}from"./DL3Q6CDs.js";import"./Cm8hpxjP.js";import"./CMpkczBb.js";import"./CnvqL-Ka.js";import"./DJuPW7wP.js";const z={class:"bg-muted flex min-h-svh flex-col items-center justify-center gap-6 p-6 md:p-10"},G={class:"flex w-full max-w-sm flex-col gap-6"},J={class:"flex items-center gap-2 self-center font-medium"},O={class:"flex flex-1 items-center justify-center"},Q={class:"text-center text-sm"},le=A({__name:"login",setup(R){const p=q(),l=m(!1),n=m(null);D({title:"Вход"});const{handleSubmit:d}=N({validationSchema:T(W),initialValues:{email:"",password:""}}),r=d(async i=>{try{n.value=null,l.value=!0;const{error:e}=await p.auth.signInWithPassword({...i});if(e){if(e.code==="invalid_credentials"){n.value="Неверные логин или пароль",l.value=!1;return}throw e}return F("/profile")}catch{n.value="Ошибка при входе",l.value=!1}});return(i,e)=>{const f=k,x=V,g=C,c=B,v=P,b=j,h=I("router-link"),w=E;return _(),H("div",z,[t("div",G,[t("span",J,[o(f)]),t("div",O,[t("form",{class:"flex flex-col gap-6 w-full max-w-xs",onSubmit:e[0]||(e[0]=(...y)=>s(r)&&s(r)(...y))},[o(w,null,{default:a(()=>[e[3]||(e[3]=t("div",{class:"flex flex-col items-center gap-1 text-center"},[t("h1",{class:"text-2xl font-bold"}," Вход в аккаунт "),t("p",{class:"text-muted-foreground text-sm text-balance"}," Авторизуйтесь, чтобы продолжить работу ")],-1)),s(n)?(_(),K(g,{key:0,variant:"destructive",class:"border-destructive"},{default:a(()=>[o(s(S)),o(x,{class:"font-normal"},{default:a(()=>[t("p",null,M(s(n)),1)]),_:1})]),_:1})):L("",!0),o(c,{name:"email",type:"email",label:"Введите email",placeholder:"email@example.com",autocomplete:"email","errors-to-show":"all"}),o(c,{name:"password",type:"password",label:"Введите пароль",placeholder:"********",autocomplete:"current-password","errors-to-show":"all"}),o(b,null,{default:a(()=>[o(v,{type:"submit",label:"Войти","is-processing":s(l)},null,8,["is-processing"])]),_:1}),t("div",Q,[e[2]||(e[2]=u(" Ещё нет аккаунта? ",-1)),o(h,{to:"/auth/register",class:"underline underline-offset-4 hover:text-primary"},{default:a(()=>[...e[1]||(e[1]=[u(" Зарегистрироваться ",-1)])]),_:1})])]),_:1})],32)])])])}}});export{le as default};
